const _0x478a66=_0x233e;(function(_0x559b8b,_0x47509f){const _0x19e1f8=_0x233e,_0x1df354=_0x559b8b();while(!![]){try{const _0xb9141c=-parseInt(_0x19e1f8(0x124))/0x1*(parseInt(_0x19e1f8(0x13c))/0x2)+-parseInt(_0x19e1f8(0x11a))/0x3*(parseInt(_0x19e1f8(0x11f))/0x4)+-parseInt(_0x19e1f8(0x12f))/0x5+-parseInt(_0x19e1f8(0x119))/0x6+-parseInt(_0x19e1f8(0x118))/0x7*(parseInt(_0x19e1f8(0x128))/0x8)+-parseInt(_0x19e1f8(0x120))/0x9+-parseInt(_0x19e1f8(0x12b))/0xa*(-parseInt(_0x19e1f8(0x110))/0xb);if(_0xb9141c===_0x47509f)break;else _0x1df354['push'](_0x1df354['shift']());}catch(_0x223d57){_0x1df354['push'](_0x1df354['shift']());}}}(_0x3c14,0x46d3c));import{promises as _0x2f06e9}from'fs';import _0x45f686 from'path';import _0x43b1cb from'node-fetch';import _0x582fc1 from'../../config.cjs';function _0x233e(_0x28d29e,_0x4098af){const _0x3c1421=_0x3c14();return _0x233e=function(_0x233ece,_0x446a39){_0x233ece=_0x233ece-0x110;let _0x5ca810=_0x3c1421[_0x233ece];return _0x5ca810;},_0x233e(_0x28d29e,_0x4098af);}import _0x1a0a93 from'@whiskeysockets/baileys';const {generateWAMessageFromContent,proto}=_0x1a0a93,__filename=new URL(import.meta['url'])[_0x478a66(0x113)],__dirname=_0x45f686[_0x478a66(0x136)](__filename),chatHistoryFile=_0x45f686['resolve'](__dirname,_0x478a66(0x112)),mistralSystemPrompt=_0x478a66(0x130);function _0x3c14(){const _0x3851a6=['system','split','replace','4yBuMJY','Something\x20went\x20wrong','Error\x20writing\x20chat\x20history\x20to\x20file:','writeFile','276397aMwwMD','result','../tag_history.json','pathname','https://telegra.ph/file/44826e95f6e863548e408.jpg','/forget','application/json','startsWith','3598rBrPfx','3243756JxHYBX','3XUACKi','response','sender','status','utf-8','1421804iXhgyy','919377QLZhuW','error','sendMessage','toLowerCase','27053XFfFKo','length','shift','HTTP\x20error!\x20status:\x20','6344MAxvVv','body','stringify','820TXkpYi','hf/meta-llama/meta-llama-3-8b-instruct','from','user','1551840bFVmqM','You\x20are\x20ùó•ùóñùóó-MD,\x20an\x20intelligent\x20bot.\x20Someone\x20mentioned\x20your\x20owner.\x20Respond\x20with\x20helpful\x20and\x20friendly\x20assistance.','Error:\x20','Conversation\x20deleted\x20successfully','readFile','trim','json','dirname','React','text-generation'];_0x3c14=function(){return _0x3851a6;};return _0x3c14();}async function readChatHistoryFromFile(){const _0x5c19dc=_0x478a66;try{const _0x491dbe=await _0x2f06e9[_0x5c19dc(0x133)](chatHistoryFile,_0x5c19dc(0x11e));return JSON['parse'](_0x491dbe);}catch(_0x20a487){return{};}}async function writeChatHistoryToFile(_0xd17ff2){const _0x4f89e9=_0x478a66;try{await _0x2f06e9[_0x4f89e9(0x13f)](chatHistoryFile,JSON[_0x4f89e9(0x12a)](_0xd17ff2,null,0x2));}catch(_0x468d6d){console[_0x4f89e9(0x121)](_0x4f89e9(0x13e),_0x468d6d);}}async function updateChatHistory(_0xf83031,_0x14e230,_0x11be23){const _0x430a17=_0x478a66;!_0xf83031[_0x14e230]&&(_0xf83031[_0x14e230]=[]),_0xf83031[_0x14e230]['push'](_0x11be23),_0xf83031[_0x14e230][_0x430a17(0x125)]>0x14&&_0xf83031[_0x14e230][_0x430a17(0x126)](),await writeChatHistoryToFile(_0xf83031);}async function deleteChatHistory(_0x57fe6a,_0x55e88b){delete _0x57fe6a[_0x55e88b],await writeChatHistoryToFile(_0x57fe6a);}const mistral=async(_0x50b05f,_0x11c098)=>{const _0x19cb05=_0x478a66,_0x1d55e=await readChatHistoryFromFile(),_0x51ce56=await _0x11c098['decodeJid'](_0x11c098['user']['id'])[_0x19cb05(0x13a)]('@')[0x0],_0x1730b1=_0x582fc1['OWNER_NUMBER'],_0x5d622f=_0x50b05f[_0x19cb05(0x129)][_0x19cb05(0x117)]('@'+_0x51ce56)||_0x50b05f[_0x19cb05(0x129)][_0x19cb05(0x117)]('@'+_0x1730b1);if(_0x50b05f[_0x19cb05(0x129)][_0x19cb05(0x123)]()===_0x19cb05(0x115)){await deleteChatHistory(_0x1d55e,_0x50b05f[_0x19cb05(0x11c)]),await _0x11c098[_0x19cb05(0x122)](_0x50b05f[_0x19cb05(0x12d)],{'text':_0x19cb05(0x132)},{'quoted':_0x50b05f});return;}if(_0x5d622f){const _0x2c06f6=_0x50b05f[_0x19cb05(0x129)]['trim']();if(_0x2c06f6==='@'+_0x51ce56||_0x2c06f6==='@'+_0x1730b1){await _0x11c098[_0x19cb05(0x122)](_0x50b05f[_0x19cb05(0x12d)],{'audio':{'url':_0x19cb05(0x114)}},{'quoted':_0x50b05f});return;}const _0x2210d0=_0x2c06f6[_0x19cb05(0x13b)]('@'+_0x51ce56,'')['replace']('@'+_0x1730b1,'')[_0x19cb05(0x134)]();if(_0x2210d0)try{const _0x5b2271=_0x1d55e[_0x50b05f[_0x19cb05(0x11c)]]||[],_0x40290e=[{'role':_0x19cb05(0x139),'content':mistralSystemPrompt},..._0x5b2271,{'role':_0x19cb05(0x12e),'content':_0x2210d0}];await _0x50b05f['React']('‚è≥');const _0x208010=await _0x43b1cb('https://matrixcoder.tech/api/ai',{'method':'POST','headers':{'Content-Type':_0x19cb05(0x116)},'body':JSON['stringify']({'type':_0x19cb05(0x138),'model':_0x19cb05(0x12c),'messages':_0x40290e})});if(!_0x208010['ok'])throw new Error(_0x19cb05(0x127)+_0x208010[_0x19cb05(0x11d)]);const _0x54711d=await _0x208010[_0x19cb05(0x135)]();await updateChatHistory(_0x1d55e,_0x50b05f['sender'],{'role':_0x19cb05(0x12e),'content':_0x2210d0}),await updateChatHistory(_0x1d55e,_0x50b05f[_0x19cb05(0x11c)],{'role':'assistant','content':_0x54711d[_0x19cb05(0x111)][_0x19cb05(0x11b)]});const _0x3b84fb=_0x54711d['result'][_0x19cb05(0x11b)];await _0x11c098[_0x19cb05(0x122)](_0x50b05f[_0x19cb05(0x12d)],{'text':_0x3b84fb},{'quoted':_0x50b05f}),await _0x50b05f['React']('‚úÖ');}catch(_0x3e024b){await _0x11c098[_0x19cb05(0x122)](_0x50b05f[_0x19cb05(0x12d)],{'text':_0x19cb05(0x13d)},{'quoted':_0x50b05f}),console[_0x19cb05(0x121)](_0x19cb05(0x131),_0x3e024b),await _0x50b05f[_0x19cb05(0x137)]('‚ùå');}}};export default mistral;